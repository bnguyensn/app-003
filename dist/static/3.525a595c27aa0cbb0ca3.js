(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"3KmD":function(e){e.exports={decimal:".",thousands:",",grouping:[3],currency:["Â£",""]}},CRdM:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__.d(__webpack_exports__,"default",function(){return Chart});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("q1tI"),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),d3_selection__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("/TIM"),d3_scale__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("ziQ1"),d3_axis__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("RhHs"),d3_shape__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("8d86"),d3_transition__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("sQjb"),d3_format__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("rWgG"),_lib_utils_arrayMaths__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("g3YP"),_json_d3_locales_en_UK__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("3KmD"),_json_d3_locales_en_UK__WEBPACK_IMPORTED_MODULE_8___namespace=__webpack_require__.t("3KmD",1),_css_chart_css__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("wuZ8"),_css_chart_css__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(_css_chart_css__WEBPACK_IMPORTED_MODULE_9__),_ChartTooltip__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("hLdN"),b;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},r=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),r.forEach(function(e){_defineProperty(t,e,a[e])})}return t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}b=__webpack_require__("0cfB").enterModule,b&&b(module);var EN_UK=Object(d3_format__WEBPACK_IMPORTED_MODULE_6__.b)(_json_d3_locales_en_UK__WEBPACK_IMPORTED_MODULE_8__),Chart=function(_React$Component){function Chart(e){var h;return _classCallCheck(this,Chart),_defineProperty(_assertThisInitialized(_assertThisInitialized(h=_possibleConstructorReturn(this,_getPrototypeOf(Chart).call(this,e)))),"chartNodeRef",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"pannableNodeRef",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"nameToDispNameMap",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"pannableSize",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"chartAssetData",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"scaleX",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"scaleY",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"mouseXY",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"mouseDown",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"chartOffset",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"lineGen",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"trans1",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"handleNewDataset",function(){var e=h.props,t=e.data,a=e.chartSize,r=e.colorData;h.pannableSize={width:t.length<=10?a.width:54*t.length,height:a.height},h.chartAssetData={},t[0].assets.forEach(function(e){h.chartAssetData[e.name]={lvl:0,color:""},h.chartAssetData[e.name].lvl=e.lvl,h.chartAssetData[e.name].color=r[e.name]});var n=h.getChart(),_=h.getPannable();if(n&&_){var i=Object(d3_selection__WEBPACK_IMPORTED_MODULE_1__.d)(n),o=Object(d3_selection__WEBPACK_IMPORTED_MODULE_1__.d)(_);i.selectAll(".clearable").remove();o.insert("rect",":first-child").classed("bkg-rect clearable",!0).attr("width",h.pannableSize.width).attr("height",a.height).attr("fill-opacity",0);h.updateChart(i,o)}}),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"updateChart",function(e,t){var a=h.props,r=(a.data,a.chartSize);h.scaleX=h.createScaleX(),h.scaleY=h.createScaleY();h.createAxisBottom(e.select(".x-axis"),h.scaleX),h.createAxisLeft(e.select(".y-axis"),h.scaleY);var n=h.createStackedSeries(),_=t.select(".vbars").selectAll(".vbar-series").data(n,function(e){return e.key});_.exit().remove();var i=_.enter().append("g").classed("vbar-series clearable",!0).merge(_);i.attr("fill",function(e){return h.chartAssetData[e.key].color});var o=function(e,t){return h.scaleY(h.scaleY.domain()[1]-(t-e))},s=i.selectAll("rect").data(function(e){return e},function(e){return e.data.name}),c=s.exit();c.transition().duration(500).attr("x",r.width+r.marginRight+r.marginLeft).remove(),c.on("mouseenter",null),c.on("mouseleave",null);var l=s.enter().append("rect").classed("asset-bar",!0).merge(s);l.attr("y",function(e){return t=e[0],a=e[1],h.scaleY(t)-o(t,a);var t,a}),l.transition().duration(500).attr("width",h.scaleX.bandwidth()).attr("height",function(e){return o(e[0],e[1])}).attr("x",function(e){return h.scaleX(e.data.name)}),l.on("mouseenter",h.showTooltip),l.on("mouseleave",h.hideTooltip);var u=h.createLineData(h.scaleX,h.scaleY),p=t.selectAll(".limit-line").data(u,function(e){return e.name}),d=p.exit();d.transition().duration(500).attr("transform","translate(0, -".concat(h.pannableSize.height,")")).attr("stroke-opacity",0).remove(),d.on("mouseenter",null),d.on("mouseleave",null);var f=p.enter().append("path").classed("limit-line",!0).merge(p);f.attr("d",function(e){return e.d}).attr("transform","translate(0, ".concat(h.pannableSize.height,")")).attr("stroke-opacity",0).attr("stroke","#63201E").attr("stroke-width",5),f.transition().duration(500).attr("transform","translate(0, 0)").attr("stroke-opacity",1),f.on("mouseenter",h.showTooltip),f.on("mouseleave",h.hideTooltip)}),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"createScaleX",function(){var e=h.props.data.map(function(e){return e.name});return Object(d3_scale__WEBPACK_IMPORTED_MODULE_2__.a)().domain(e).range([0,h.pannableSize.width]).padding(.05)}),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"createScaleY",function(){var e=h.props,t=e.chartSize,a=e.data,r=a.map(function(e){return Math.min(e.fCom-e.fCal,0)}),n=function(e,t){return e+t.amt},_=a.map(function(e){return e.assets.reduce(n,0)}),i=Object(_lib_utils_arrayMaths__WEBPACK_IMPORTED_MODULE_7__.a)([r,_]);return Object(d3_scale__WEBPACK_IMPORTED_MODULE_2__.b)().domain([0,i]).nice().range([t.height,0])}),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"createAxisBottom",function(e,t){var a=Object(d3_axis__WEBPACK_IMPORTED_MODULE_3__.a)(t).tickFormat(function(e){return h.nameToDispNameMap[e]});return e.call(a)}),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"createAxisLeft",function(e,t){var a=Object(d3_axis__WEBPACK_IMPORTED_MODULE_3__.b)(t).ticks(5).tickFormat(EN_UK.format("$~s"));return e.call(a)}),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"createStackedSeries",function(){var e=h.props.data,t=e.map(function(e){var t={};return t.name=e.name,e.assets.forEach(function(e){t[e.name]=e.amt}),t}),a=e[0].assets;a.sort(function(e,t){return e.lvl===t.lvl?e.name.localeCompare(t.name,"en",{sensitivity:"base",ignorePunctuation:!0,numeric:!0}):e.lvl-t.lvl});var r=a.map(function(e){return e.name});return Object(d3_shape__WEBPACK_IMPORTED_MODULE_4__.b)().keys(r)(t)}),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"createLineData",function(r,n){return h.props.data.map(function(e){var t=n(e.remFCom),a=[[r(e.name),t],[r(e.name)+r.bandwidth(),t]];return{name:"Remaining calls from investments",amount:e.remFCom,points:a,d:h.lineGen(a)}})}),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"handlePannableClick",function(e){}),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"handlePannableMouseDown",function(e){h.mouseDown=!0}),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"handlePannableMouseUp",function(e){h.mouseDown=!1}),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"handlePannableMouseEnter",function(e){var t=e.clientX,a=e.clientY;h.mouseXY.x=t,h.mouseXY.y=a}),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"handlePannableMouseLeave",function(e){h.mouseDown=!1}),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"handlePannableMouseMove",function(e){var t=e.clientX,a=e.clientY;if(h.mouseDown){var r=h.getPannable();if(r){var n=Object(d3_selection__WEBPACK_IMPORTED_MODULE_1__.d)(r);h.chartOffset.x+=t-h.mouseXY.x,n.attr("transform","translate(".concat(h.chartOffset.x,", 0)"))}}h.mouseXY.x=t,h.mouseXY.y=a}),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"showTooltip",function(e,t,a){var r=h.props.colorData,n=a[t].parentElement,_=a[t].getBoundingClientRect();if(n&&_){var i,o,s,c=a[t].getAttribute("class");s="asset-bar"===c?(i=n.__data__.key,o=e[1]-e[0],r[i]):(i=e.name,o=e.amount,"#63201E");var l="".concat(i,": ").concat(EN_UK.format("$,.0f")(o)),u={top:_.top,left:_.left+h.scaleX.bandwidth()+5};h.setState(function(e){return{tooltipChangeFlag:!e.tooltipChangeFlag,tooltip:{show:!0,text:l,pos:u,color:s}}})}}),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"hideTooltip",function(){var e=d3_selection__WEBPACK_IMPORTED_MODULE_1__.a.relatedTarget;if(e){var t=e.getAttribute("class");"asset-bar"===t&&"limit-line"===t||h.setState(function(e){return{tooltipChangeFlag:!e.tooltipChangeFlag,tooltip:_objectSpread({},e.tooltip,{show:!1})}})}}),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"getChart",function(){return h.chartNodeRef&&h.chartNodeRef.current?h.chartNodeRef.current:null}),_defineProperty(_assertThisInitialized(_assertThisInitialized(h)),"getPannable",function(){return h.pannableNodeRef&&h.pannableNodeRef.current?h.pannableNodeRef.current:null}),h.chartNodeRef=react__WEBPACK_IMPORTED_MODULE_0__.createRef(),h.pannableNodeRef=react__WEBPACK_IMPORTED_MODULE_0__.createRef(),h.nameToDispNameMap={},e.data.forEach(function(e){h.nameToDispNameMap[e.name]=e.dispName}),h.mouseXY={x:0,y:0},h.mouseDown=!1,h.chartOffset={x:0,y:0},h.lineGen=Object(d3_shape__WEBPACK_IMPORTED_MODULE_4__.a)().defined(function(e){return null!==e}),h.trans1=Object(d3_transition__WEBPACK_IMPORTED_MODULE_5__.a)().duration(2e3),h.state={tooltipChangeFlag:!1,tooltip:{show:!1,text:"",pos:{top:0,left:0}}},h}return _inherits(Chart,_React$Component),_createClass(Chart,[{key:"componentDidMount",value:function(){this.handleNewDataset()}},{key:"componentDidUpdate",value:function(e,t,a){var r=t.tooltipChangeFlag;if(this.state.tooltipChangeFlag===r){var n=this.getChart(),_=this.getPannable();if(n&&_){var i=Object(d3_selection__WEBPACK_IMPORTED_MODULE_1__.d)(n),o=Object(d3_selection__WEBPACK_IMPORTED_MODULE_1__.d)(_);this.updateChart(i,o)}}}},{key:"render",value:function(){var e=this.props.chartSize,t=this.state.tooltip;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"chart-container"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{width:e.width+e.marginRight+e.marginLeft,height:e.height+e.marginTop+e.marginBottom},react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",{ref:this.chartNodeRef,className:"chart",transform:"translate(".concat(e.marginLeft,", ").concat(e.marginTop,")")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",{ref:this.pannableNodeRef,className:"pannable-x-only",onClick:this.handlePannableClick,onMouseDown:this.handlePannableMouseDown,onMouseUp:this.handlePannableMouseUp,onMouseEnter:this.handlePannableMouseEnter,onMouseLeave:this.handlePannableMouseLeave,onMouseMove:this.handlePannableMouseMove},react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",{className:"x-axis",transform:"translate(0, ".concat(e.height,")")}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",{className:"vbars"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",{className:"limit-lines"})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",{className:"y-axis"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("rect",{className:"bkg-rect",width:e.marginLeft,height:e.height+e.marginBottom,transform:"translate(-".concat(e.marginLeft,", 0)"),fill:"#fff1e5"})))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ChartTooltip__WEBPACK_IMPORTED_MODULE_10__.a,{show:t.show,text:t.text,pos:t.pos,color:t.color}))}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Chart}(react__WEBPACK_IMPORTED_MODULE_0__.Component),oc,pc;oc=__webpack_require__("0cfB").default,pc=__webpack_require__("0cfB").leaveModule,oc&&(oc.register(EN_UK,"EN_UK","/Users/bnguyensn/PhpstormProjects/app-003/src/homepage/components/Chart.js"),oc.register(Chart,"Chart","/Users/bnguyensn/PhpstormProjects/app-003/src/homepage/components/Chart.js"),pc(module))}.call(this,__webpack_require__("3UD+")(module))},g3YP:function(e,i,o){"use strict";(function(e){var t,a,r;function n(t,e){Array.isArray(e)?e.forEach(function(e){n(t,e)}):t.push(e)}function _(e){var t=[];return n(t,e),Math.max.apply(Math,t)}o.d(i,"a",function(){return _}),(t=o("0cfB").enterModule)&&t(e),a=o("0cfB").default,r=o("0cfB").leaveModule,a&&(a.register(n,"recursiveFlat","/Users/bnguyensn/PhpstormProjects/app-003/src/homepage/lib/utils/arrayMaths.js"),a.register(_,"findMaxInArray","/Users/bnguyensn/PhpstormProjects/app-003/src/homepage/lib/utils/arrayMaths.js"),r(e))}).call(this,o("3UD+")(e))},hLdN:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(module){__webpack_require__.d(__webpack_exports__,"a",function(){return ChartTooltip});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("q1tI"),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),Ec;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Ec=__webpack_require__("0cfB").enterModule,Ec&&Ec(module);var ChartTooltip=function(_React$PureComponent){function ChartTooltip(){return _classCallCheck(this,ChartTooltip),_possibleConstructorReturn(this,_getPrototypeOf(ChartTooltip).apply(this,arguments))}return _inherits(ChartTooltip,_React$PureComponent),_createClass(ChartTooltip,[{key:"render",value:function(){var e=this.props,t=e.show,a=e.text,r=e.pos,n=e.color;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"chart-tooltip ".concat(t?"":"hidden"),style:{top:"".concat(r.top,"px"),left:"".concat(r.left,"px"),backgroundColor:"".concat(n)}},a)}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),ChartTooltip}(react__WEBPACK_IMPORTED_MODULE_0__.PureComponent),kd,ld;kd=__webpack_require__("0cfB").default,ld=__webpack_require__("0cfB").leaveModule,kd&&(kd.register(ChartTooltip,"ChartTooltip","/Users/bnguyensn/PhpstormProjects/app-003/src/homepage/components/ChartTooltip.js"),ld(module))}).call(this,__webpack_require__("3UD+")(module))},wuZ8:function(e,t,a){}}]);